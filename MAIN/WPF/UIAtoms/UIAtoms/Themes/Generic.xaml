<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:NeuroSpeech.UIAtoms.Controls"
    xmlns:core="clr-namespace:NeuroSpeech.UIAtoms.Core"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:lb="clr-namespace:NeuroSpeech.UIAtoms.Controls.Buttons"
    xmlns:dlg="clr-namespace:NeuroSpeech.UIAtoms.Dialogs"
    xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    mc:Ignorable="d">


    <LinearGradientBrush
        x:Key="ButtonNormalBackground"
        EndPoint="0,1"
        StartPoint="0,0">
        <GradientStop
            Color="#F3F3F3"
            Offset="0" />
        <GradientStop
            Color="#EBEBEB"
            Offset="0.5" />
        <GradientStop
            Color="#DDDDDD"
            Offset="0.5" />
        <GradientStop
            Color="#CDCDCD"
            Offset="1" />
    </LinearGradientBrush>
    <SolidColorBrush
        x:Key="ButtonNormalBorder"
        Color="#FF707070" />

    <Style
        x:Key="ButtonFocusVisual">
        <Setter
            Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Border>
                        <Rectangle
                            Margin="2"
                            StrokeThickness="1"
                            Stroke="#60000000"
                            StrokeDashArray="1 2" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>




    <LinearGradientBrush
        x:Key="NormalBrush"
        StartPoint="0,0"
        EndPoint="0,1">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#FFF"
                    Offset="0.0" />
                <GradientStop
                    Color="#CCC"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <LinearGradientBrush
        x:Key="HorizontalNormalBrush"
        StartPoint="0,0"
        EndPoint="1,0">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#FFF"
                    Offset="0.0" />
                <GradientStop
                    Color="#CCC"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <LinearGradientBrush
        x:Key="LightBrush"
        StartPoint="0,0"
        EndPoint="0,1">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#FFF"
                    Offset="0.0" />
                <GradientStop
                    Color="#EEE"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <LinearGradientBrush
        x:Key="HorizontalLightBrush"
        StartPoint="0,0"
        EndPoint="1,0">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#FFF"
                    Offset="0.0" />
                <GradientStop
                    Color="#EEE"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <LinearGradientBrush
        x:Key="DarkBrush"
        StartPoint="0,0"
        EndPoint="0,1">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#FFF"
                    Offset="0.0" />
                <GradientStop
                    Color="#AAA"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <LinearGradientBrush
        x:Key="PressedBrush"
        StartPoint="0,0"
        EndPoint="0,1">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#BBB"
                    Offset="0.0" />
                <GradientStop
                    Color="#EEE"
                    Offset="0.1" />
                <GradientStop
                    Color="#EEE"
                    Offset="0.9" />
                <GradientStop
                    Color="#FFF"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <SolidColorBrush
        x:Key="DisabledForegroundBrush"
        Color="#888" />

    <SolidColorBrush
        x:Key="DisabledBackgroundBrush"
        Color="#EEE" />

    <SolidColorBrush
        x:Key="WindowBackgroundBrush"
        Color="#FFF" />

    <SolidColorBrush
        x:Key="SelectedBackgroundBrush"
        Color="#DDD" />

    <!-- Border Brushes -->

    <LinearGradientBrush
        x:Key="NormalBorderBrush"
        StartPoint="0,0"
        EndPoint="0,1">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#CCC"
                    Offset="0.0" />
                <GradientStop
                    Color="#444"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <LinearGradientBrush
        x:Key="HorizontalNormalBorderBrush"
        StartPoint="0,0"
        EndPoint="1,0">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#CCC"
                    Offset="0.0" />
                <GradientStop
                    Color="#444"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <LinearGradientBrush
        x:Key="DefaultedBorderBrush"
        StartPoint="0,0"
        EndPoint="0,1">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#777"
                    Offset="0.0" />
                <GradientStop
                    Color="#000"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <LinearGradientBrush
        x:Key="PressedBorderBrush"
        StartPoint="0,0"
        EndPoint="0,1">
        <LinearGradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop
                    Color="#444"
                    Offset="0.0" />
                <GradientStop
                    Color="#888"
                    Offset="1.0" />
            </GradientStopCollection>
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <SolidColorBrush
        x:Key="DisabledBorderBrush"
        Color="#AAA" />

    <SolidColorBrush
        x:Key="SolidBorderBrush"
        Color="#888" />

    <SolidColorBrush
        x:Key="LightBorderBrush"
        Color="#AAA" />

    <!-- Miscellaneous Brushes -->
    <SolidColorBrush
        x:Key="GlyphBrush"
        Color="#444" />

    <SolidColorBrush
        x:Key="LightColorBrush"
        Color="#DDD" />




    <Style
        TargetType="{x:Type local:AtomFilterTextBox}">
        <Setter
            Property="Width"
            Value="Auto" />
        <Setter
            Property="HorizontalAlignment"
            Value="Stretch" />
        <Setter
            Property="WatermarkText"
            Value="Search..." />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomFilterTextBox}">
                    <Grid
                        Height="Auto">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="20" />
                            <ColumnDefinition />
                            <ColumnDefinition
                                Width="20" />
                        </Grid.ColumnDefinitions>
                        <Rectangle
                            x:Name="rectangle"
                            Fill="Transparent"
                            Stroke="LightBlue"
                            Grid.ColumnSpan="3"
                            RadiusX="10"
                            RadiusY="10" />
                        <local:AtomIcon
                            Source="/NeuroSpeech.UIAtoms;Component/Buttons/Icons/AtomSearchButton.Icon.png"
                            HorizontalAlignment="Right" />
                        <TextBlock
                            VerticalAlignment="Stretch"
                            Grid.Column="1"
                            x:Name="PART_Watermark"
                            Text="{TemplateBinding WatermarkText}"
                            TextWrapping="Wrap"
                            Margin="4,2,2,2"
                            Foreground="{TemplateBinding WatermarkColor}" />
                        <ScrollViewer
                            x:Name="PART_ContentHost"
                            Grid.Column="1"
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                        <Button
                            x:Name="PART_DeleteButton"
                            Grid.Column="2"
                            BorderThickness="0"
                            Background="Transparent"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Left"
                            CommandTarget="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"
                            Command="{x:Static EditingCommands.Delete}">
                            <Button.Template>
                                <ControlTemplate>
                                    <local:AtomIcon
                                        Source="/NeuroSpeech.UIAtoms;Component/Buttons/Icons/AtomDeleteButton.Icon.png" />
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>
                    <ControlTemplate.Triggers>

                        <Trigger
                            Property="IsKeyboardFocusWithin"
                            Value="True">
                            <Setter
                                Property="Stroke"
                                TargetName="rectangle"
                                Value="#FF84FF0D" />
                        </Trigger>
                        <Trigger
                            Property="HasText"
                            Value="True">
                            <Setter
                                Property="Visibility"
                                TargetName="PART_Watermark"
                                Value="Hidden" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>



    <Style
        TargetType="{x:Type local:AtomCheckBoxList}"
        BasedOn="{StaticResource {x:Type ListBox}}">
        <Setter
            Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <UniformGrid
                        IsItemsHost="True" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style>



    <LinearGradientBrush
        x:Key="TextBoxBorder"
        EndPoint="0,20"
        StartPoint="0,0"
        MappingMode="Absolute">
        <GradientStop
            Color="#ABADB3"
            Offset="0.05" />
        <GradientStop
            Color="#E2E3EA"
            Offset="0.07" />
        <GradientStop
            Color="#E3E9EF"
            Offset="1" />
    </LinearGradientBrush>


    <Style
        TargetType="{x:Type local:AtomTextBox}">
        <Setter
            Property="Foreground"
            Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
        <Setter
            Property="Background"
            Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" />
        <Setter
            Property="BorderBrush"
            Value="{StaticResource TextBoxBorder}" />
        <Setter
            Property="BorderThickness"
            Value="1" />
        <Setter
            Property="Padding"
            Value="1" />
        <Setter
            Property="AllowDrop"
            Value="true" />
        <Setter
            Property="FocusVisualStyle"
            Value="{x:Null}" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomTextBox}">
                    <Grid
                        Height="Auto"
                        Background="{TemplateBinding Background}">
                        <TextBlock
                            x:Name="PART_Watermark"
                            VerticalAlignment="Center"
                            Text="{TemplateBinding WatermarkText}"
                            TextWrapping="Wrap"
                            Margin="4,2,2,2"
                            Foreground="{TemplateBinding WatermarkColor}" />
                        <TextBlock
                            x:Name="PART_Format"
                            VerticalAlignment="Center"
                            Text="{TemplateBinding FormattedText}"
                            TextWrapping="Wrap"
                            Margin="4,2,2,2"
                            TextAlignment="{TemplateBinding TextAlignment}"
                            Visibility="Collapsed" />
                        <Microsoft_Windows_Themes:ListBoxChrome
                            x:Name="Bd"
                            SnapsToDevicePixels="true"
                            Background="Transparent"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            RenderFocused="{TemplateBinding IsKeyboardFocusWithin}"
                            RenderMouseOver="{TemplateBinding IsMouseOver}">
                            <ScrollViewer
                                x:Name="PART_ContentHost"
                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                        </Microsoft_Windows_Themes:ListBoxChrome>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger
                            Property="IsEnabled"
                            Value="false">
                            <Setter
                                Property="Background"
                                TargetName="Bd"
                                Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                            <Setter
                                Property="Foreground"
                                Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                        </Trigger>
                        <Trigger
                            Property="HasText"
                            Value="true">
                            <Setter
                                Property="Visibility"
                                Value="Hidden"
                                TargetName="PART_Watermark" />
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition
                                    Property="IsKeyboardFocusWithin"
                                    Value="False" />
                                <Condition
                                    Property="HasFormattedText"
                                    Value="True" />
                            </MultiTrigger.Conditions>
                            <Setter
                                Property="Visibility"
                                TargetName="PART_Format"
                                Value="Visible" />
                            <Setter
                                Property="Visibility"
                                TargetName="PART_ContentHost"
                                Value="Hidden" />
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>



    <SolidColorBrush
        x:Key="ListBorder"
        Color="#828790" />




    <Style
        TargetType="{x:Type local:AtomCheckBoxListItem}"
        BasedOn="{StaticResource {x:Type ContentControl}}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomCheckBoxListItem}">
                    <CheckBox
                        IsChecked="{Binding IsSelected, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                        <ContentPresenter />
                    </CheckBox>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style
        TargetType="{x:Type local:AtomToggleButtonBar}"
        BasedOn="{StaticResource {x:Type ListBox}}">
        <Setter
            Property="VerticalAlignment"
            Value="Center" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomToggleButtonBar}">
                    <Border
                        CornerRadius="5">
                        <ItemsPresenter />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter
            Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <local:AtomStackPanel
                        HorizontalGap="1"
                        Orientation="Horizontal"
                        IsItemsHost="True" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style
        TargetType="{x:Type local:AtomToggleButtonBarItem}"
        BasedOn="{StaticResource {x:Type ContentControl}}">
        <Setter
            Property="Background">
            <Setter.Value>
                <LinearGradientBrush
                    EndPoint="0,1"
                    StartPoint="0,0">
                    <GradientStop
                        Color="#F3F3F3"
                        Offset="0" />
                    <GradientStop
                        Color="#EBEBEB"
                        Offset="0.5" />
                    <GradientStop
                        Color="#DDDDDD"
                        Offset="0.5" />
                    <GradientStop
                        Color="#CDCDCD"
                        Offset="1" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter
            Property="VerticalContentAlignment"
            Value="Center" />
        <Setter
            Property="HorizontalContentAlignment"
            Value="Center" />
        <Setter
            Property="VerticalAlignment"
            Value="Stretch" />
        <Setter
            Property="Padding"
            Value="4" />
        <Setter
            Property="MinWidth"
            Value="75" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomToggleButtonBarItem}">
                    <Grid>
                        <Rectangle
                            Fill="{TemplateBinding Background}" />
                        <ContentPresenter
                            Margin="{TemplateBinding Padding}"
                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger
                Property="IsMouseOver"
                Value="True">
                <Setter
                    Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush
                            EndPoint="0,1"
                            StartPoint="0,0">
                            <GradientStop
                                Color="#FF6799EE"
                                Offset="0" />
                            <GradientStop
                                Color="#FFEBEBEB"
                                Offset="0.5" />
                            <GradientStop
                                Color="#FFDDDDDD"
                                Offset="0.5" />
                            <GradientStop
                                Color="#FF87B0F8"
                                Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger
                Property="IsSelected"
                Value="True">
                <Setter
                    Property="Foreground"
                    Value="White" />
                <Setter
                    Property="Background">
                    <Setter.Value>
                        <LinearGradientBrush
                            EndPoint="0,1"
                            StartPoint="0,0">
                            <GradientStop
                                Color="#FF393939"
                                Offset="0" />
                            <GradientStop
                                Color="#FF222222"
                                Offset="0.475" />
                            <GradientStop
                                Color="#FF4B4B4B"
                                Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style
        TargetType="{x:Type local:AtomRadioButtonListItem}"
        BasedOn="{StaticResource {x:Type ContentControl}}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomRadioButtonListItem}">
                    <RadioButton
                        IsChecked="{Binding IsSelected, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                        <ContentPresenter />
                    </RadioButton>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <ControlTemplate
        TargetType="{x:Type HeaderedItemsControl}"
        x:Key="ErrorHeaderItems">
        <Grid
            Height="Auto"
            SnapsToDevicePixels="true"
            Background="{TemplateBinding Background}">
            <Grid.RowDefinitions>
                <RowDefinition
                    Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Rectangle
                Fill="#FFFFCDCD"
                Stroke="{Binding Background, ElementName=border, Mode=Default}"
                RadiusX="5"
                RadiusY="5"
                Grid.RowSpan="2">
                <Rectangle.Effect>
                    <DropShadowEffect
                        Direction="310" />
                </Rectangle.Effect>
            </Rectangle>
            <ItemsPresenter
                Margin="5"
                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                Grid.Row="1"
                d:LayoutOverrides="Width, Height" />
            <Border
                x:Name="border"
                HorizontalAlignment="Stretch"
                Width="Auto"
                Background="#FFC90000"
                CornerRadius="5"
                Padding="5"
                Grid.Row="0">
                <ContentPresenter
                    ContentSource="Header"
                    TextElement.Foreground="White"
                    TextElement.FontWeight="Bold" />
            </Border>
        </Grid>
    </ControlTemplate>



    <core:StringToVisibiltyConverter
        x:Key="stringToVisibility" />

    <Style
        TargetType="{x:Type local:AtomFormItemContainer}">
        <Style.Resources>
            <Style
                TargetType="{x:Type ContentPresenter}">
                <Setter
                    Property="HorizontalAlignment"
                    Value="{Binding Content.HorizontalAlignment, RelativeSource={RelativeSource Mode=Self}}" />
            </Style>
        </Style.Resources>
        <!--Setter Property="HorizontalContentAlignment" Value="Stretch"/-->
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomFormItemContainer}">
                    <Grid
                        x:Name="innerGrid">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup
                                x:Name="General">
                                <VisualState
                                    x:Name="Normal" />
                                <VisualState
                                    x:Name="HasError">
                                    <Storyboard>
                                        <ColorAnimationUsingKeyFrames
                                            BeginTime="00:00:00"
                                            Duration="00:00:00.0010000"
                                            Storyboard.TargetName="contentBorder"
                                            Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)">
                                            <SplineColorKeyFrame
                                                KeyTime="00:00:00"
                                                Value="Red" />
                                        </ColorAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="Auto" />
                            <ColumnDefinition
                                Width="10" />
                            <ColumnDefinition />
                            <ColumnDefinition
                                Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition
                                Height="Auto" />
                            <RowDefinition />
                            <RowDefinition
                                Height="Auto" />
                        </Grid.RowDefinitions>
                        <Rectangle
                            RadiusX="5"
                            RadiusY="5"
                            Grid.ColumnSpan="3"
                            Grid.RowSpan="3" />
                        <Label
                            Width="Auto"
                            Height="Auto"
                            x:Name="PART_Label"
                            Grid.Row="1"
                            HorizontalAlignment="Stretch"
                            Target="{Binding ElementName=contentPresenter}" />
                        <Border
                            ToolTip="{TemplateBinding ErrorMessage}"
                            HorizontalAlignment="{Binding HorizontalAlignment, ElementName=contentPresenter}"
                            x:Name="contentBorder"
                            BorderThickness="0"
                            CornerRadius="2"
                            Padding="2"
                            Grid.Column="2"
                            Grid.Row="1"
                            Background="#00000000">
                            <ContentPresenter
                                Margin="0,0,0,0"
                                x:Name="contentPresenter" />
                        </Border>
                        <ContentControl
                            Width="Auto"
                            Height="Auto"
                            HorizontalAlignment="Left"
                            x:Name="PART_Description"
                            IsTabStop="False"
                            Grid.Row="2"
                            Grid.Column="2" />
                        <ContentControl
                            Content="*"
                            IsTabStop="False"
                            Grid.Column="1"
                            Grid.Row="1"
                            HorizontalAlignment="Left"
                            Foreground="#FFFF0000"
                            x:Name="PART_IsRequired" />
                        <ContentControl
                            Width="Auto"
                            IsTabStop="False"
                            Height="Auto"
                            HorizontalAlignment="Left"
                            x:Name="PART_Title"
                            Grid.Column="2"
                            Grid.Row="0" />
                        <ContentControl
                            Width="Auto"
                            IsTabStop="False"
                            Height="Auto"
                            HorizontalAlignment="Center"
                            x:Name="PART_CommandBox"
                            Grid.Column="3"
                            Grid.Row="1" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.BasedOn>
            <StaticResource
                ResourceKey="{x:Type ContentControl}" />
        </Style.BasedOn>
    </Style>

    <core:IntToVisibilityConverter
        x:Key="intToVisibilityConverter" />
    <core:ContentToVisibilityConverter
        x:Key="contentToVisibilityConverter" />

    <Style
        TargetType="{x:Type local:AtomForm}"
        BasedOn="{StaticResource {x:Type ItemsControl}}">
        <Setter
            Property="HorizontalContentAlignment"
            Value="Stretch" />
        <Setter
            Property="Width"
            Value="Auto" />
        <Setter
            Property="HeaderBackground">
            <Setter.Value>
                <LinearGradientBrush
                    EndPoint="0.5,1"
                    StartPoint="0.5,0">
                    <GradientStop
                        Color="#FF74A1FF"
                        Offset="0" />
                    <GradientStop
                        Color="#FF9EBDFF"
                        Offset="1" />
                    <GradientStop
                        Color="#FF98B9FF"
                        Offset="0.478" />
                    <GradientStop
                        Color="#FF86ADFF"
                        Offset="0.47" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter
            Property="BorderBrush">
            <Setter.Value>
                <SolidColorBrush
                    Color="#FF9EBDFF" />
            </Setter.Value>
        </Setter>
        <Setter
            Property="BorderThickness"
            Value="1" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomForm}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition
                                Height="Auto" />
                            <RowDefinition
                                Height="Auto" />
                            <RowDefinition />
                            <RowDefinition
                                Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="Auto" />
                            <ColumnDefinition />
                            <ColumnDefinition
                                Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Rectangle
                            StrokeThickness="{TemplateBinding BorderThickness}"
                            Stroke="{TemplateBinding BorderBrush}"
                            Fill="{TemplateBinding Background}"
                            VerticalAlignment="Stretch"
                            Height="Auto"
                            Grid.RowSpan="4"
                            RadiusX="5"
                            RadiusY="5"
                            x:Name="PART_Box"
                            Grid.ColumnSpan="3" />
                        <Border
                            x:Name="PART_HeaderBorder"
                            Padding="5"
                            CornerRadius="5"
                            Background="{TemplateBinding HeaderBackground}"
                            Grid.ColumnSpan="3"
                            d:LayoutOverrides="GridBox">
                            <ContentPresenter
                                ContentSource="Header" />
                        </Border>
                        <local:AtomToggleButtonBar
                            Grid.Row="1"
                            Grid.ColumnSpan="2"
                            x:Name="PART_Selector" />
                        <ScrollViewer
                            Grid.Row="2"
                            Grid.ColumnSpan="2"
                            Margin="5"
                            BorderThickness="0"
                            VerticalScrollBarVisibility="Auto">
                            <ItemsPresenter />
                        </ScrollViewer>


                        <HeaderedItemsControl
                            Grid.Row="2"
                            Header="Errors"
                            x:Name="PART_Errors"
                            Margin="5"
                            Template="{StaticResource ErrorHeaderItems}"
                            Grid.Column="2"
                            VerticalAlignment="Top"
                            MaxWidth="200">
                            <HeaderedItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <local:AtomErrorDisplay
                                        ValidationError="{Binding}" />
                                </DataTemplate>
                            </HeaderedItemsControl.ItemTemplate>
                        </HeaderedItemsControl>
                        <Border
                            Grid.Row="3"
                            Width="{TemplateBinding LabelWidth}" />
                        <ContentPresenter
                            x:Name="PART_Footer"
                            ContentSource="Footer"
                            Grid.Column="1"
                            HorizontalAlignment="Left"
                            Margin="20,0,0,4"
                            Grid.Row="3" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter
            Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <local:AtomFlexibleGrid
                        IsItemsHost="True" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style>






    <Style
        TargetType="{x:Type local:AtomCountryCheckBoxList}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomCountryCheckBoxList}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>



    <BooleanToVisibilityConverter
        x:Key="booleanToVisibility" />

    <Style
        TargetType="{x:Type local:AtomAccordionItem}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomAccordionItem}">
                    <Grid
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition
                                Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <ToggleButton
                            x:Name="PART_Header"
                            HorizontalAlignment="Stretch" />
                        <ContentPresenter
                            x:Name="PART_Content"
                            Grid.Row="1"
                            Visibility="Collapsed" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style
        TargetType="{x:Type local:AtomImageButton}">
        <Setter
            Property="FocusVisualStyle"
            Value="{StaticResource ButtonFocusVisual}" />
        <Setter
            Property="Background"
            Value="{StaticResource ButtonNormalBackground}" />
        <Setter
            Property="BorderBrush"
            Value="{StaticResource ButtonNormalBorder}" />
        <Setter
            Property="BorderThickness"
            Value="1" />
        <Setter
            Property="Foreground"
            Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
        <Setter
            Property="HorizontalContentAlignment"
            Value="Center" />
        <Setter
            Property="VerticalContentAlignment"
            Value="Center" />
        <Setter
            Property="Padding"
            Value="1" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomImageButton}">
                    <Microsoft_Windows_Themes:ButtonChrome
                        x:Name="Chrome"
                        SnapsToDevicePixels="True"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        RenderDefaulted="{TemplateBinding IsDefaulted}"
                        RenderMouseOver="{TemplateBinding IsMouseOver}"
                        RenderPressed="{TemplateBinding IsPressed}">
                        <Grid
                            Margin="4,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition
                                    Width="Auto" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <local:AtomIcon
                                Source="{TemplateBinding ImageSource}"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
                            <ContentPresenter
                                Grid.Column="1"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                Margin="{TemplateBinding Padding}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                RecognizesAccessKey="True" />
                        </Grid>
                    </Microsoft_Windows_Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger
                            Property="IsKeyboardFocused"
                            Value="true">
                            <Setter
                                Property="RenderDefaulted"
                                TargetName="Chrome"
                                Value="true" />
                        </Trigger>
                        <Trigger
                            Property="ToggleButton.IsChecked"
                            Value="true">
                            <Setter
                                Property="RenderPressed"
                                TargetName="Chrome"
                                Value="true" />
                        </Trigger>
                        <Trigger
                            Property="IsEnabled"
                            Value="false">
                            <Setter
                                Property="Foreground"
                                Value="#ADADAD" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>



    <!--<Style TargetType="{x:Type local:AtomFilePathEditor}">
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:AtomFilePathEditor}">
                    <Grid ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox HorizontalAlignment="Stretch" x:Name="PART_TextBox"
                                 TextWrapping="Wrap"
                                 
                                 HorizontalScrollBarVisibility="Disabled"
                                 />
                        <lb:AtomOpenButton Grid.Column="1" Width="Auto" x:Name="PART_Button"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>-->




    <Style
        TargetType="{x:Type local:AtomListBox}"
        BasedOn="{StaticResource {x:Type ListBox}}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomListBox}">
                    <Border
                        x:Name="Bd"
                        SnapsToDevicePixels="true"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Padding="1">
                        <Grid
                            Focusable="False">
                            <Grid.RowDefinitions>
                                <RowDefinition
                                    Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <local:AtomFilterTextBox
                                x:Name="PART_FilterText"
                                ItemsControl="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                Text="{Binding FilterText, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                FilterMode="{TemplateBinding FilterMode}"
                                FilterComparison="{TemplateBinding FilterComparison}"
                                FilterProvider="{TemplateBinding FilterProvider}"
                                FilterProviderParameter="{TemplateBinding FilterProviderParameter}"
                                HorizontalAlignment="Stretch" />
                            <ScrollViewer
                                Grid.Row="1"
                                Padding="{TemplateBinding Padding}"
                                Focusable="false">
                                <ItemsPresenter
                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                            </ScrollViewer>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger
                            Property="IsEnabled"
                            Value="false">
                            <Setter
                                Property="Background"
                                TargetName="Bd"
                                Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                        </Trigger>
                        <Trigger
                            Property="IsGrouping"
                            Value="true">
                            <Setter
                                Property="ScrollViewer.CanContentScroll"
                                Value="false" />
                        </Trigger>
                        <Trigger
                            Property="IsFilterVisible"
                            Value="false">
                            <Setter
                                Property="Visibility"
                                TargetName="PART_FilterText"
                                Value="Collapsed" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Geometry
        x:Key="DownArrowGeometry">M 0 0 L 3.5 4 L 7 0 Z</Geometry>

    <Style
        x:Key="ComboBoxReadonlyToggleButton"
        TargetType="{x:Type ToggleButton}">
        <Setter
            Property="OverridesDefaultStyle"
            Value="true" />
        <Setter
            Property="IsTabStop"
            Value="false" />
        <Setter
            Property="Focusable"
            Value="false" />
        <Setter
            Property="ClickMode"
            Value="Press" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type ToggleButton}">
                    <Microsoft_Windows_Themes:ButtonChrome
                        x:Name="Chrome"
                        SnapsToDevicePixels="true"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        RenderMouseOver="{TemplateBinding IsMouseOver}"
                        RenderPressed="{TemplateBinding IsPressed}">
                        <Grid
                            HorizontalAlignment="Right"
                            Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                            <Path
                                x:Name="Arrow"
                                Fill="Black"
                                HorizontalAlignment="Center"
                                Margin="3,1,0,0"
                                VerticalAlignment="Center"
                                Data="{StaticResource DownArrowGeometry}" />
                        </Grid>
                    </Microsoft_Windows_Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger
                            Property="IsChecked"
                            Value="true">
                            <Setter
                                Property="RenderPressed"
                                TargetName="Chrome"
                                Value="true" />
                        </Trigger>
                        <Trigger
                            Property="IsEnabled"
                            Value="false">
                            <Setter
                                Property="Fill"
                                TargetName="Arrow"
                                Value="#AFAFAF" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style
        x:Key="ComboBoxToggleButton"
        TargetType="{x:Type ToggleButton}">
        <Setter
            Property="OverridesDefaultStyle"
            Value="true" />
        <Setter
            Property="IsTabStop"
            Value="false" />
        <Setter
            Property="Focusable"
            Value="false" />
        <Setter
            Property="ClickMode"
            Value="Press" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type ToggleButton}">
                    <Microsoft_Windows_Themes:ButtonChrome
                        x:Name="Chrome"
                        Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"
                        SnapsToDevicePixels="true"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        RenderMouseOver="{TemplateBinding IsMouseOver}"
                        RenderPressed="{TemplateBinding IsPressed}"
                        RoundCorners="false">
                        <Path
                            x:Name="Arrow"
                            Fill="Black"
                            HorizontalAlignment="Center"
                            Margin="0,1,0,0"
                            VerticalAlignment="Center"
                            Data="{StaticResource DownArrowGeometry}" />
                    </Microsoft_Windows_Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger
                            Property="IsChecked"
                            Value="true">
                            <Setter
                                Property="RenderPressed"
                                TargetName="Chrome"
                                Value="true" />
                        </Trigger>
                        <Trigger
                            Property="IsEnabled"
                            Value="false">
                            <Setter
                                Property="Fill"
                                TargetName="Arrow"
                                Value="#AFAFAF" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style
        TargetType="{x:Type local:AtomComboBox}"
        BasedOn="{StaticResource {x:Type ComboBox}}">
        <Setter
            Property="IsTextSearchEnabled"
            Value="true" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomComboBox}">
                    <Grid
                        x:Name="MainGrid"
                        SnapsToDevicePixels="true">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="*" />
                            <ColumnDefinition
                                MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}"
                                Width="0" />
                        </Grid.ColumnDefinitions>
                        <Popup
                            x:Name="PART_Popup"
                            Margin="1"
                            AllowsTransparency="true"
                            IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}"
                            Placement="Bottom"
                            PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}"
                            Grid.ColumnSpan="2">
                            <Microsoft_Windows_Themes:SystemDropShadowChrome
                                x:Name="Shdw"
                                MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                MinWidth="{Binding ActualWidth, ElementName=MainGrid}"
                                Color="Transparent">
                                <Border
                                    x:Name="DropDownBorder"
                                    Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                                    BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                    BorderThickness="1">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition
                                                Height="Auto" />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <local:AtomFilterTextBox
                                            Margin="2"
                                            x:Name="PART_FilterText"
                                            ItemsControl="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                            Text="{Binding FilterText, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                            FilterMode="{TemplateBinding FilterMode}"
                                            FilterComparison="{TemplateBinding FilterComparison}"
                                            FilterProvider="{TemplateBinding FilterProvider}"
                                            FilterProviderParameter="{TemplateBinding FilterProviderParameter}"
                                            HorizontalAlignment="Stretch" />
                                        <ScrollViewer
                                            CanContentScroll="true"
                                            Grid.Row="1">
                                            <ItemsPresenter
                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                                KeyboardNavigation.DirectionalNavigation="Contained" />
                                        </ScrollViewer>
                                    </Grid>
                                </Border>
                            </Microsoft_Windows_Themes:SystemDropShadowChrome>
                        </Popup>
                        <ToggleButton
                            Style="{StaticResource ComboBoxReadonlyToggleButton}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            Grid.ColumnSpan="2"
                            IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" />
                        <ContentPresenter
                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                            Margin="{TemplateBinding Padding}"
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                            IsHitTestVisible="false"
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                            Content="{TemplateBinding SelectionBoxItem}"
                            ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
                            ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                            ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" />
                    </Grid>
                    <ControlTemplate.Triggers>

                        <Trigger
                            Property="HasDropShadow"
                            SourceName="PART_Popup"
                            Value="true">
                            <Setter
                                Property="Margin"
                                TargetName="Shdw"
                                Value="0,0,5,5" />
                            <Setter
                                Property="Color"
                                TargetName="Shdw"
                                Value="#71000000" />
                        </Trigger>
                        <Trigger
                            Property="HasItems"
                            Value="false">
                            <Setter
                                Property="Height"
                                TargetName="DropDownBorder"
                                Value="95" />
                        </Trigger>
                        <Trigger
                            Property="IsEnabled"
                            Value="false">
                            <Setter
                                Property="Foreground"
                                Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                            <Setter
                                Property="Background"
                                Value="#FFF4F4F4" />
                        </Trigger>
                        <Trigger
                            Property="IsGrouping"
                            Value="true">
                            <Setter
                                Property="ScrollViewer.CanContentScroll"
                                Value="false" />
                        </Trigger>
                        <Trigger
                            Property="IsFilterVisible"
                            Value="false">
                            <Setter
                                Property="Visibility"
                                TargetName="PART_FilterText"
                                Value="Collapsed" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style
        TargetType="{x:Type local:AtomComboBoxItemWithFilter}">
        <Setter
            Property="HorizontalContentAlignment"
            Value="Left" />
        <Setter
            Property="VerticalContentAlignment"
            Value="Top" />
        <Setter
            Property="Padding"
            Value="3,0,3,0" />
        <Setter
            Property="Background"
            Value="Transparent" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomComboBoxItemWithFilter}">
                    <Border
                        x:Name="Bd"
                        SnapsToDevicePixels="true"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Padding="{TemplateBinding Padding}">
                        <ContentPresenter
                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger
                            Property="IsHighlighted"
                            Value="true">
                            <Setter
                                Property="Background"
                                TargetName="Bd"
                                Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                            <Setter
                                Property="Foreground"
                                Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                        </Trigger>
                        <Trigger
                            Property="IsEnabled"
                            Value="false">
                            <Setter
                                Property="Foreground"
                                Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style
        TargetType="{x:Type local:AtomCountryComboBox}"
        BasedOn="{StaticResource {x:Type local:AtomComboBox}}">
        <Setter
            Property="TextSearch.TextPath"
            Value="CountryName" />
        <Setter
            Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="20" />
                            <ColumnDefinition
                                Width="5" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Image
                            Source="{Binding ImageUri}"
                            Height="20"
                            MaxWidth="20" />
                        <TextBlock
                            Text="{Binding CountryName}"
                            Grid.Column="2" />
                    </Grid>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style
        TargetType="{x:Type local:AtomNumberContainerControl}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomNumberContainerControl}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition
                                    Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <local:AtomTextBox
                                x:Name="PART_TextBox"
                                TextAlignment="Right"
                                Grid.RowSpan="2"
                                HorizontalAlignment="Stretch"
                                Width="Auto" />
                            <Button
                                Grid.Column="1"
                                IsTabStop="False"
                                Command="{x:Static Slider.IncreaseLarge}"
                                CommandTarget="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}">
                                <Path
                                    Fill="Black"
                                    Stretch="Fill"
                                    Stroke="Black"
                                    Width="8"
                                    Height="4"
                                    Data="M0,4 L4,0 8,4 z" />
                            </Button>
                            <Button
                                Grid.Column="1"
                                Grid.Row="1"
                                IsTabStop="False"
                                Command="{x:Static Slider.DecreaseLarge}"
                                CommandTarget="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}">
                                <Path
                                    Fill="Black"
                                    Stretch="Fill"
                                    Stroke="Black"
                                    Width="8"
                                    Height="4"
                                    Data="M0,0 L4,4 8,0 z" />
                            </Button>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style
        TargetType="{x:Type local:AtomCurrencyTextBox}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomCurrencyTextBox}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition
                                    Width="Auto" />
                                <ColumnDefinition
                                    Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <local:AtomTextBox
                                x:Name="PART_TextBox"
                                TextAlignment="Right"
                                Grid.RowSpan="2"
                                HorizontalAlignment="Stretch"
                                Width="Auto" />
                            <local:AtomValueDialogButton
                                Grid.Column="1"
                                Grid.RowSpan="2"
                                Title="Calculator"
                                Value="{Binding Value, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=TwoWay}"
                                DialogType="{x:Type dlg:AtomAccountsCalculator}"
                                ImageSource="/NeuroSpeech.UIAtoms;component/Buttons/Icons/AtomCalculatorButton.Icon.png"
                                Width="{Binding Height,RelativeSource={RelativeSource Mode=Self}}"
                                Visibility="{TemplateBinding CalculatorVisibility}"
                                IsTabStop="False" />
                            <Button
                                Grid.Column="2"
                                IsTabStop="False"
                                Command="{x:Static Slider.IncreaseLarge}"
                                CommandTarget="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}">
                                <Path
                                    Fill="Black"
                                    Stretch="Fill"
                                    Stroke="Black"
                                    Width="8"
                                    Height="4"
                                    Data="M0,4 L4,0 8,4 z" />
                            </Button>
                            <Button
                                Grid.Column="2"
                                Grid.Row="1"
                                IsTabStop="False"
                                Command="{x:Static Slider.DecreaseLarge}"
                                CommandTarget="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}">
                                <Path
                                    Fill="Black"
                                    Stretch="Fill"
                                    Stroke="Black"
                                    Width="8"
                                    Height="4"
                                    Data="M0,0 L4,4 8,0 z" />
                            </Button>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style
        TargetType="{x:Type local:AtomCodeViewer}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomCodeViewer}">
                    <RichTextBox
                        BorderThickness="0"
                        x:Name="PART_Code"
                        FontFamily="Courier New"
                        AcceptsReturn="True"
                        AcceptsTab="True"
                        VerticalScrollBarVisibility="Auto">
                        <RichTextBox.Resources>
                            <Style
                                TargetType="{x:Type Paragraph}">
                                <Setter
                                    Property="Margin"
                                    Value="0" />
                            </Style>
                        </RichTextBox.Resources>
                    </RichTextBox>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style
        TargetType="{x:Type local:AtomErrorDisplay}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomErrorDisplay}">
                    <TextBlock
                        x:Name="textBlock"
                        Text="{Binding ValidationError.Message, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                        TextWrapping="WrapWithOverflow"
                        Cursor="Hand" />
                    <ControlTemplate.Triggers>
                        <Trigger
                            Property="IsMouseOver"
                            Value="True">
                            <Setter
                                Property="Foreground"
                                TargetName="textBlock"
                                Value="Blue" />
                            <Setter
                                Property="TextDecorations"
                                TargetName="textBlock"
                                Value="Underline" />
                        </Trigger>
                        <Trigger
                            Property="IsPressed"
                            Value="True">
                            <Setter
                                Property="Foreground"
                                TargetName="textBlock"
                                Value="Red" />
                            <Setter
                                Property="TextDecorations"
                                TargetName="textBlock"
                                Value="Underline" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style
        TargetType="{x:Type local:AtomCalculator}">
        <Setter
            Property="BorderThickness"
            Value="1" />
        <Setter
            Property="BorderBrush">
            <Setter.Value>
                <SolidColorBrush
                    Color="LightGray" />
            </Setter.Value>
        </Setter>
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomCalculator}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="2"
                        Padding="2">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition
                                    Height="40" />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <TextBox
                                Margin="2"
                                Grid.ColumnSpan="5"
                                IsReadOnly="True"
                                x:Name="PART_Value"
                                TextAlignment="Right"
                                VerticalContentAlignment="Bottom" />
                            <TextBlock
                                Margin="2"
                                VerticalAlignment="Top"
                                Grid.ColumnSpan="5"
                                HorizontalAlignment="Right"
                                Text="{TemplateBinding ExpressionHistory}" />

                            <Button
                                Grid.Row="1"
                                Grid.Column="0"
                                Content="BKSP"
                                x:Name="PART_BackSpace"
                                Margin="2" />
                            <Button
                                x:Name="PART_ClearEntry"
                                Grid.Row="1"
                                Grid.Column="1"
                                Content="CE"
                                Margin="2" />
                            <Button
                                x:Name="PART_Clear"
                                Content="C"
                                Grid.Row="1"
                                Grid.Column="2"
                                Margin="2" />
                            <Button
                                x:Name="PART_PosNeg"
                                Content="+/-"
                                Grid.Row="1"
                                Grid.Column="3"
                                Margin="2" />
                            <Button
                                x:Name="PART_Root"
                                Content="Sqrt"
                                Grid.Row="1"
                                Grid.Column="4"
                                Margin="2" />

                            <Button
                                x:Name="PART_Seven"
                                Content="7"
                                Grid.Row="2"
                                Grid.Column="0"
                                Margin="2" />
                            <Button
                                x:Name="PART_Eight"
                                Content="8"
                                Grid.Row="2"
                                Grid.Column="1"
                                Margin="2" />
                            <Button
                                x:Name="PART_Nine"
                                Content="9"
                                Grid.Row="2"
                                Grid.Column="2"
                                Margin="2" />
                            <Button
                                x:Name="PART_Division"
                                Content="/"
                                Grid.Row="2"
                                Grid.Column="3"
                                Margin="2" />
                            <Button
                                x:Name="PART_Modulo"
                                Content="%"
                                Grid.Row="2"
                                Grid.Column="4"
                                Margin="2" />

                            <Button
                                x:Name="PART_Four"
                                Content="4"
                                Grid.Row="3"
                                Grid.Column="0"
                                Margin="2" />
                            <Button
                                x:Name="PART_Five"
                                Content="5"
                                Grid.Row="3"
                                Grid.Column="1"
                                Margin="2" />
                            <Button
                                x:Name="PART_Six"
                                Content="6"
                                Grid.Row="3"
                                Grid.Column="2"
                                Margin="2" />
                            <Button
                                x:Name="PART_Mul"
                                Content="*"
                                Grid.Row="3"
                                Grid.Column="3"
                                Margin="2" />
                            <Button
                                x:Name="PART_OnebyX"
                                Content="1/x"
                                Grid.Row="3"
                                Grid.Column="4"
                                Margin="2" />

                            <Button
                                x:Name="PART_One"
                                Content="1"
                                Grid.Row="4"
                                Grid.Column="0"
                                Margin="2" />
                            <Button
                                x:Name="PART_Two"
                                Content="2"
                                Grid.Row="4"
                                Grid.Column="1"
                                Margin="2" />
                            <Button
                                x:Name="PART_Three"
                                Content="3"
                                Grid.Row="4"
                                Grid.Column="2"
                                Margin="2" />
                            <Button
                                x:Name="PART_Minus"
                                Content="-"
                                Grid.Row="4"
                                Grid.Column="3"
                                Margin="2" />

                            <Button
                                x:Name="PART_Zero"
                                Content="0"
                                Grid.Row="5"
                                Grid.Column="0"
                                Margin="2" />
                            <Button
                                x:Name="PART_Zero2"
                                Content="00"
                                Grid.Row="5"
                                Grid.Column="1"
                                Margin="2" />
                            <Button
                                x:Name="PART_Dot"
                                Content="."
                                Grid.Row="5"
                                Grid.Column="2"
                                Margin="2" />
                            <Button
                                x:Name="PART_Plus"
                                Content="+"
                                Grid.Row="5"
                                Grid.Column="3"
                                Margin="2" />
                            <Button
                                x:Name="PART_Equal"
                                Content="="
                                Grid.Row="4"
                                Grid.Column="4"
                                Grid.RowSpan="2"
                                Margin="2" />

                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>





    <!--Style TargetType="{x:Type local:AtomBusyIndicator}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:AtomBusyIndicator}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            x:Name="PART_Border" RenderTransformOrigin="0.5,0.5" d:DesignWidth="56" d:DesignHeight="56">
                        <Border.RenderTransform>
                            <RotateTransform/>
                        </Border.RenderTransform>
                    	<Grid>
                    		<Ellipse x:Name="busyIndicator" Width="Auto" Height="Auto" StrokeThickness="4" StrokeDashOffset="7" StrokeDashCap="Triangle" d:IsLocked="True">
                    			<Ellipse.Stroke>
                    				<RadialGradientBrush Center="0.824,0.246" GradientOrigin="0.824,0.246" RadiusX="-0.634" RadiusY="-0.634">
                    					<GradientStop Color="#FF1234CE" Offset="1"/>
                    					<GradientStop Color="White"/>
                    				</RadialGradientBrush>
                    			</Ellipse.Stroke>
                    		</Ellipse>
                    		<Path x:Name="successIndicator" Stretch="Fill" Stroke="#FF13FF00" HorizontalAlignment="Stretch" Margin="-0.5,7.5,-0.5,8.75" Width="Auto" Data="M0.061484919,8.7034799 L7.0777264,18.310627 24.618329,7.3209015 8.9414155,14.127441 z" Fill="#FF13FF00" ClipToBounds="True" d:IsLocked="True"/>
                    		<Path x:Name="errorIndicator" Stretch="Fill" StrokeThickness="4" Margin="2.25,1.75,1.75,2.372" Data="M2.125,2 L19.25,19.25 M19.43158,2.0900727 L2,19.25">
                    			<Path.Stroke>
                    				<RadialGradientBrush Center="0.497,0.492" GradientOrigin="0.497,0.492" RadiusX="-0.634" RadiusY="-0.634">
                    					<GradientStop Color="#FF4D0000" Offset="1"/>
                    					<GradientStop Color="#FFFF1A1A"/>
                    				</RadialGradientBrush>
                    			</Path.Stroke>
                    		</Path>
                    	</Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style-->

    <!--<Style TargetType="{x:Type local:AtomTask}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:AtomTask}">
                    <Border Background="{TemplateBinding Background}"
                		BorderBrush="{TemplateBinding BorderBrush}"
                		BorderThickness="{TemplateBinding BorderThickness}">
                		<VisualStateManager.VisualStateGroups>
                			<VisualStateGroup>
                				<VisualState x:Name="Failed">
                					<Storyboard>
                						<ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="rectRed" Storyboard.TargetProperty="(UIElement.Visibility)">
                							<DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Visible}"/>
                						</ObjectAnimationUsingKeyFrames>
                					</Storyboard>
                				</VisualState>
                				<VisualState x:Name="Running">
                					<Storyboard>
                						<ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="rectWhite" Storyboard.TargetProperty="(UIElement.Visibility)">
                							<DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Visible}"/>
                						</ObjectAnimationUsingKeyFrames>
                					</Storyboard>
                				</VisualState>
                			</VisualStateGroup>
                		</VisualStateManager.VisualStateGroups>
                		<Grid>
                			<Grid.ColumnDefinitions>
                				<ColumnDefinition Width="Auto"/>
                				<ColumnDefinition/>
                			</Grid.ColumnDefinitions>
                			<Rectangle x:Name="rectWhite" Fill="White" Stroke="Black" Visibility="Collapsed" Grid.ColumnSpan="2"/>
                			<Rectangle x:Name="rectRed" Fill="Red" Stroke="Black" Grid.ColumnSpan="2" Visibility="Collapsed"/>
                		</Grid>
                	</Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>-->

    <Style
        TargetType="{x:Type local:AtomTraceView}">
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomTraceView}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <RichTextBox
                            x:Name="PART_Content"
                            HorizontalScrollBarVisibility="Hidden"
                            VerticalScrollBarVisibility="Auto"
                            AcceptsReturn="True"
                            AcceptsTab="True"
                            IsReadOnly="True" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style
        TargetType="{x:Type local:AtomDataForm}"
        BasedOn="{StaticResource {x:Type ItemsControl}}">
        <Setter
            Property="HeaderBackground">
            <Setter.Value>
                <LinearGradientBrush
                    EndPoint="0.5,1"
                    StartPoint="0.5,0">
                    <GradientStop
                        Color="#FF74A1FF"
                        Offset="0" />
                    <GradientStop
                        Color="#FF9EBDFF"
                        Offset="1" />
                    <GradientStop
                        Color="#FF98B9FF"
                        Offset="0.478" />
                    <GradientStop
                        Color="#FF86ADFF"
                        Offset="0.47" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter
            Property="BorderBrush">
            <Setter.Value>
                <SolidColorBrush
                    Color="#FF9EBDFF" />
            </Setter.Value>
        </Setter>
        <Setter
            Property="BorderThickness"
            Value="1" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomDataForm}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition
                                Height="Auto" />
                            <RowDefinition
                                Height="Auto" />
                            <RowDefinition />
                            <RowDefinition
                                Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="Auto" />
                            <ColumnDefinition />
                            <ColumnDefinition
                                Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Rectangle
                            StrokeThickness="{TemplateBinding BorderThickness}"
                            Stroke="{TemplateBinding BorderBrush}"
                            Fill="{TemplateBinding Background}"
                            VerticalAlignment="Stretch"
                            Height="Auto"
                            Grid.RowSpan="3"
                            RadiusX="5"
                            RadiusY="5"
                            x:Name="PART_Box"
                            Grid.ColumnSpan="3" />
                        <Border
                            x:Name="PART_HeaderBorder"
                            Padding="5"
                            CornerRadius="5"
                            Background="{TemplateBinding HeaderBackground}"
                            Grid.ColumnSpan="3"
                            d:LayoutOverrides="GridBox">
                            <ContentPresenter
                                ContentSource="Header" />
                        </Border>
                        <local:AtomToggleButtonBar
                            Grid.Row="1"
                            Grid.ColumnSpan="2"
                            x:Name="PART_Selector" />
                        <ScrollViewer
                            Grid.Row="2"
                            Grid.ColumnSpan="2"
                            Margin="5"
                            BorderThickness="0"
                            VerticalScrollBarVisibility="Auto">
                            <ItemsPresenter />
                        </ScrollViewer>


                        <HeaderedItemsControl
                            Grid.Row="2"
                            Header="Errors"
                            x:Name="PART_Errors"
                            Margin="5,5,-5,0"
                            Style="{StaticResource ErrorsControlStyle}"
                            Grid.Column="2"
                            VerticalAlignment="Top"
                            MaxWidth="200" />
                        <Border
                            Grid.Row="3"
                            Width="{TemplateBinding LabelWidth}" />
                        <ContentControl
                            x:Name="PART_Footer"
                            Grid.Column="1"
                            HorizontalAlignment="Left"
                            Margin="20,0,0,4"
                            Grid.Row="3">
                            <local:AtomStackPanel
                                Grid.Row="3"
                                Grid.Column="1"
                                Orientation="Horizontal"
                                Margin="5"
                                HorizontalAlignment="Left">
                                <Button
                                    Content="Edit"
                                    x:Name="PART_Edit"
                                    Width="75" />
                                <Button
                                    Content="Save"
                                    x:Name="PART_Save"
                                    Width="75" />
                                <Button
                                    Content="Cancel"
                                    x:Name="PART_Cancel"
                                    Width="75" />
                            </local:AtomStackPanel>
                        </ContentControl>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter
            Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <local:AtomFlexibleGrid
                        IsItemsHost="True" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--<Style TargetType="{x:Type local:AtomDataForm}">
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <local:AtomFlexibleGrid 
                        IsItemsHost="True"
                        RowLayout="{Binding RowLayout, RelativeSource={RelativeSource AncestorType={x:Type local:AtomDataForm}}}"   
                        HorizontalGap="{Binding HorizontalGap, RelativeSource={RelativeSource AncestorType={x:Type local:AtomDataForm}}}"
                        VerticalGap="{Binding VerticalGap, RelativeSource={RelativeSource AncestorType={x:Type local:AtomDataForm}}}"
                    />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:AtomDataForm}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Rectangle 
                            StrokeThickness="{TemplateBinding BorderThickness}"
                            Stroke="{TemplateBinding BorderBrush}" 
                            Fill="{TemplateBinding Background}"
                            Grid.RowSpan="3" 
                            Grid.ColumnSpan="3" 
                            RadiusX="5" 
                            RadiusY="5" 
                            Visibility="{Binding Visibility, ElementName=PART_HeaderBorder, Mode=OneWay}"/>
                            <Border 
                            x:Name="PART_HeaderBorder"
                            Padding="5"
                            CornerRadius="5"
                    		Background="{TemplateBinding HeaderBackground}" 
                            Grid.ColumnSpan="3"
                            >
                                <ContentPresenter ContentSource="Header"/>
                            </Border>
                            <local:AtomToggleButtonBar x:Name="PART_ToggleButtonBar" Grid.ColumnSpan="2" Margin="5"/>
                            <ScrollViewer Grid.Row="2" Grid.ColumnSpan="2" 
                                            HorizontalAlignment="Stretch" 
                                            HorizontalContentAlignment="Stretch"
                                          HorizontalScrollBarVisibility="Auto"
                                          VerticalScrollBarVisibility="Auto"
                                            Margin="5"
                                            >
                                <ItemsPresenter/>
                            </ScrollViewer>
                            <Border Width="{TemplateBinding LabelWidth}" HorizontalAlignment="Stretch"/>
                            <local:AtomStackPanel 
                                Grid.Row="3" 
                                Grid.Column="1"
                                Orientation="Horizontal" 
                                Margin="5"
                                HorizontalAlignment="Left">
                                <Button Content="Edit" 
                                        x:Name="PART_Edit"
                                        Width="75"
                                        />
                                <Button Content="Save" 
                                        x:Name="PART_Save"
                                        Width="75"
                                        />
                                <Button Content="Cancel" 
                                        x:Name="PART_Cancel"
                                        Width="75"
                                        />
                            </local:AtomStackPanel>
                            <HeaderedItemsControl
                                Header="Errors"
                                BorderBrush="Red"
                                BorderThickness="1"
                                Background="LightYellow"
                                x:Name="PART_Errors"
                                Grid.Column="2"
                                Grid.Row="2"
                                DisplayMemberPath="ErrorMessage"
                                Margin="5"
                                >
                                <HeaderedItemsControl.Template>
                                    <ControlTemplate TargetType="{x:Type HeaderedItemsControl}">
                                        <Border 
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            Background="{TemplateBinding Background}"
                                            CornerRadius="5"
                                            >
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition/>
                                                </Grid.RowDefinitions>
                                                <Border
                                                    Background="{TemplateBinding BorderBrush}"
                                                    CornerRadius="5"
                                                    >
                                                    <ContentPresenter Content="{TemplateBinding Header}" Margin="5"/>
                                                </Border>
                                                <ItemsPresenter Grid.Row="1" Margin="5"/>
                                            </Grid>
                                        </Border>
                                    </ControlTemplate>
                                </HeaderedItemsControl.Template>

                            </HeaderedItemsControl>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>-->



    <Style
        TargetType="{x:Type local:AtomFormLayout}">
        <Setter
            Property="HorizontalContentAlignment"
            Value="Stretch" />
        <Setter
            Property="Width"
            Value="Auto" />
        <Setter
            Property="HorizontalAlignment"
            Value="Stretch" />
        <Setter
            Property="HeaderBackground">
            <Setter.Value>
                <LinearGradientBrush
                    EndPoint="0.5,1"
                    StartPoint="0.5,0">
                    <GradientStop
                        Color="#FF74A1FF"
                        Offset="0" />
                    <GradientStop
                        Color="#FF9EBDFF"
                        Offset="1" />
                    <GradientStop
                        Color="#FF98B9FF"
                        Offset="0.478" />
                    <GradientStop
                        Color="#FF86ADFF"
                        Offset="0.47" />
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter
            Property="BorderBrush">
            <Setter.Value>
                <SolidColorBrush
                    Color="#FF9EBDFF" />
            </Setter.Value>
        </Setter>
        <Setter
            Property="BorderThickness"
            Value="1" />
        <Setter
            Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <local:AtomFlexibleGrid />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomFormLayout}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition
                                Height="Auto" />
                            <RowDefinition
                                Height="Auto" />
                            <RowDefinition />
                            <RowDefinition
                                Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Rectangle
                            StrokeThickness="{TemplateBinding BorderThickness}"
                            Stroke="{TemplateBinding BorderBrush}"
                            Fill="{TemplateBinding Background}"
                            Grid.RowSpan="4"
                            Grid.ColumnSpan="2"
                            RadiusX="5"
                            RadiusY="5"
                            x:Name="PART_Box" />
                        <Border
                            x:Name="PART_HeaderBorder"
                            Padding="5"
                            CornerRadius="5"
                            Background="{TemplateBinding HeaderBackground}"
                            Grid.ColumnSpan="3">
                            <ContentPresenter
                                ContentSource="Header" />
                        </Border>
                        <local:AtomToggleButtonBar
                            Grid.Row="1"
                            Grid.ColumnSpan="2"
                            x:Name="PART_Selector" />
                        <ItemsPresenter
                            Grid.Row="2"
                            x:Name="PART_Items"
                            Grid.ColumnSpan="2" />
                        <Border
                            Width="{TemplateBinding LabelWidth}"
                            HorizontalAlignment="Stretch"
                            Grid.Row="3" />
                        <ContentPresenter
                            ContentSource="Footer"
                            Grid.Row="3" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style
        TargetType="{x:Type local:AtomComboTextBox}">
        <Setter
            Property="Foreground"
            Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
        <Setter
            Property="Background"
            Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" />
        <Setter
            Property="BorderBrush"
            Value="{StaticResource TextBoxBorder}" />
        <Setter
            Property="BorderThickness"
            Value="1" />
        <Setter
            Property="Padding"
            Value="1" />
        <Setter
            Property="AllowDrop"
            Value="true" />
        <Setter
            Property="FocusVisualStyle"
            Value="{x:Null}" />
        <Setter
            Property="Template">
            <Setter.Value>
                <ControlTemplate
                    TargetType="{x:Type local:AtomComboTextBox}">
                    <Grid
                        Height="Auto"
                        Background="{TemplateBinding Background}">
                        <TextBlock
                            x:Name="PART_Watermark"
                            VerticalAlignment="Center"
                            TextWrapping="Wrap"
                            Margin="4,2,2,2" />
                        <Microsoft_Windows_Themes:ListBoxChrome
                            x:Name="Bd"
                            SnapsToDevicePixels="true"
                            Background="Transparent"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            RenderFocused="{TemplateBinding IsKeyboardFocusWithin}"
                            RenderMouseOver="{TemplateBinding IsMouseOver}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition
                                        Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <ScrollViewer
                                    x:Name="PART_ContentHost"
                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                <ToggleButton
                                    x:Name="PART_ToggleButton"
                                    IsTabStop="False"
                                    BorderThickness="0"
                                    Background="Transparent"
                                    Grid.Column="1">
                                    <ToggleButton.Content>
                                        <Path
                                            x:Name="BtnArrow"
                                            Height="4"
                                            Width="8"
                                            Stretch="Uniform"
                                            Data="F1 M 301.14,-189.041L 311.57,-189.041L 306.355,-182.942L 301.14,-189.041 Z "
                                            Margin="0,0,6,0"
                                            HorizontalAlignment="Right">
                                            <Path.Fill>
                                                <SolidColorBrush
                                                    x:Name="BtnArrowColor"
                                                    Color="#FF333333" />
                                            </Path.Fill>
                                        </Path>
                                    </ToggleButton.Content>
                                </ToggleButton>
                                <Popup
                                    x:Name="PART_Popup"
                                    HorizontalAlignment="Stretch">
                                    <Border
                                        HorizontalAlignment="Stretch"
                                        Width="Auto">
                                        <ContentControl
                                            x:Name="PART_List"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Stretch"
                                            Width="Auto" />
                                    </Border>
                                </Popup>
                            </Grid>
                        </Microsoft_Windows_Themes:ListBoxChrome>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger
                            Property="IsEnabled"
                            Value="false">
                            <Setter
                                Property="Background"
                                TargetName="Bd"
                                Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                            <Setter
                                Property="Foreground"
                                Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>



</ResourceDictionary>
